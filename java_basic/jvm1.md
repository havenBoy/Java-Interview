### 类的加载机制

- 什么是类的加载？

  把类文件的.class文件中的二进制数据加载到内存中，放在运行数据区中的方法区内，然后创建堆内存中的class对象，

  向程序员提供访问运行时数据区内数据结构的接口

- 类的生命周期

  **加载-连接-初始化-使用-卸载**

  - 加载     把源文件的.class文件加载找到类的信息记载在方法区中；

  - 连接

    - 验证         检查该对象class文件是否符合java语言规范

    - 准备         为static修饰的成员变量分配内存，设置初始默认值

    - 解析          把所有接口类，方法名，类名等全部替换为具体的内存地址

  - 初始化            执行顺序：父类静态域或静态代码块，之后是子类的静态域或者静态代码块

  - 使用               对象实例化  ->  垃圾回收  -> 对象销毁

  - 卸载              程序中不再含有该类的引用，会被垃圾回收器回收

- 类加载器

  - **启动类加载器(Bootstrap ClassLoader):**

    用来加载java核心库，是虚拟机的一部分

  - **扩展类加载器(Extendsion ClassLoader):**

    用来加载java的扩展库

  - **应用程序类加载器(Application ClassLoader):**

    用来加载classpath下的类库，是getSystemClassLoader()方法的返回值，是系统默认的类加载器

- 双亲委派模型

  - 如果一个类加载器收到了类加载的请求，它不会尝试去加载这个类，而是把这个请求委派给父类加载器去完成，
  
    这样所有的加载请求都会传递到最顶层的类加载器，只有当父加载器不能加载时，才会交给子类加载器去加载；
  
  - 好处：如果是由不同的加载器去加载，各自的类去不同的加载，得到了不同的对象，应用就会混乱；
  
  